assuming u have a rtxen running:

$dd if=/dev/zero of=image1.img bs=1024M count=20  
 # that gives to 10*1024 => 10gb img will be 20gb

to mount on loop device to create file system on it
$losetup /dev/loop4 image1.img
to create file system
$mkfs.ext4 /dev/loop4




wget http://archive.ubuntu.com/ubuntu/dists/xenial-updates/main/installer-amd64/current/images/netboot/xen/vmlinuz 
wget http://archive.ubuntu.com/ubuntu/dists/xenial-updates/main/installer-amd64/current/images/netboot/xen/initrd.gz


nano pacer.cfg


name="pacer"
memory=4096
vcpus=8
disk=['file:/root/pacer.img,xvda,w']
#vif=['bridge=virbr0'] (use this f libvirt-bin is installed)
#vif=['']  (use this f libvirt-bin is not installed)
kernel="/root/vmlinuz"
ramdisk="/root/initrd.gz"
extra="debian-installer/exit/alwaus_halt=true -- console=hvc0"



xl create -f pacer.cfg

xl console pacer

# go install linux

# after installation complete, xen will restart the domu, xl shutdown it frist

xl shutdown pacer

nano pacer.cfg

name="pacer"
memory=4096
vcpus=8
disk=['file:/root/pacer.img,xvda,w']
#vif=['bridge=virbr0'] (use this f libvirt-bin is installed)
#vif=['']  (use this f libvirt-bin is not installed)
bootloader="pygrub"

xl create -f pacer.cfg

now setup up domU:

sudo -i
passwd
nano /etc/ssh/sshd_config
# Authentication:
#LoginGraceTime 120
PermitRootLogin yes
#StrictModes yes

service sshd restart

ifconfig to see ip



echo "SUBSYSTEM==\"cpu\",ACTION==\"add\",RUN+=\"/bin/sh -c '[ ! -e /sys\$devpath/online ] || echo 1 > /sys\$devpath/online'\"" > /etc/udev/rules.d/cpu-online.rules && udevadm control --reload-rules && apt update &&  apt -y install gcc && apt -y install python3-dev 

wget http://semanchuk.com/philip/sysv_ipc/sysv_ipc-1.0.0.tar.gz && tar -xzf sysv_ipc-1.0.0.tar.gz && cd sysv_ipc-1.0.0 && python3 setup.py install

cd /root/ && apt -y install python3-pip && pip install --upgrade pip && pip install numpy 

cd /root/ && git clone https://github.com/libheartbeats/heartbeats.git && cd heartbeats && mkdir hbed && echo "export HEARTBEAT_ENABLED_DIR='/root/heartbeats/hbed/'" >> ~/.bashrc && source ~/.bashrc && make clean && make uninstall && make && make install && ldconfig 

cd /root/ && git clone https://github.com/selectel/pyxs && cd pyxs && python3 setup.py install && cd /root/ && apt -y install xenstore-utils 

 https://github.com/chen116/demo_pacer.git && cd demo_pacer && make && cd /root/ 

